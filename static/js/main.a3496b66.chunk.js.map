{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","services/fetchApi.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","App.js","index.js"],"names":["module","exports","fetchAPI","query","page","a","url","fetch","response","json","Searchbar","state","searchQuery","handleQueryChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","onSubmit","props","trim","toast","warning","className","s","form","this","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","src","alt","onClick","largeImage","image","ImageGallery","result","gallery","map","item","webformatURL","tags","largeImageURL","id","Button","modalRoot","document","getElementById","Modal","handleKeyDown","code","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","overlay","modal","Status","App","showModal","status","onLoadMoreClick","onFetchImages","onErrorNoMoreImages","pageQuery","emptyResultErrorMessage","shortResultErrorMessage","hits","length","Error","prevState","scrollBy","top","behavior","error","message","handleFormSubmit","toggleModal","prevProps","onErrorNoImages","color","width","style","textAlign","position","autoClose","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.a3496b66.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__DjWH3\",\"form\":\"Searchbar_form__XuKjc\",\"button\":\"Searchbar_button__MhnaU\",\"label\":\"Searchbar_label__1BV3w\",\"input\":\"Searchbar_input__2C4aO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__gboaM\",\"item\":\"ImageGallery_item__35Kd3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ImageGalleryItem_image__2xsbt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3QF_k\"};","const API_KEY = '23600792-c35e54b22aba5a82a8a51cd77';\nconst BASE_URL = 'https://pixabay.com/api';\n\nconst fetchAPI = async (query, page) => {\n  const url = `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=${API_KEY}`;\n  const response = await fetch(url);\n\n  return await response.json();\n};\n\nexport default fetchAPI;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ImSearch } from 'react-icons/im';\nimport s from './Searchbar.module.css';\nimport { toast } from 'react-toastify';\n\nexport default class Searchbar extends Component {\n  state = { searchQuery: '' };\n\n  handleQueryChange = e => {\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { searchQuery } = this.state;\n    const { onSubmit } = this.props;\n\n    if (searchQuery.trim() === '') {\n      toast.warning('Enter your request');\n      return;\n    }\n\n    onSubmit(searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.form} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.button}>\n            <ImSearch />\n            <span className={s.label}>Search</span>\n          </button>\n\n          <input\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleQueryChange}\n            value={this.state.searchQuery}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ src, alt, onClick, largeImage }) => {\n  return <img className={s.image} src={src} alt={alt} onClick={() => onClick(largeImage)} />;\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ result, onClick }) => {\n  return (\n    <ul className={s.gallery}>\n      {result.map(image => (\n        <li key={image.id} className={s.item}>\n          <ImageGalleryItem\n            src={image.webformatURL}\n            alt={image.tags}\n            largeImage={image.largeImageURL}\n            onClick={onClick}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  result: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n    }),\n  ),\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button className={s.button} type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.getElementById('modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => e.code === 'Escape' && this.props.onClick();\n\n  handleBackdropClick = e => e.currentTarget === e.target && this.props.onClick();\n\n  render() {\n    const { largeImage } = this.props;\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\n        <div className={s.modal}>\n          <img src={largeImage} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport Loader from 'react-loader-spinner';\nimport fetchAPI from './services/fetchApi';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst Status = {\n  IDLE: 'idle', //обa false\n  RESOLVED: 'resolved', //loader false, button true\n  PENDING: 'pending', //loader true, button false\n};\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n    result: [],\n    showModal: false,\n    status: Status.IDLE,\n    largeImage: null,\n  };\n\n  async componentDidUpdate(prevProps, prevState) {\n    const { searchQuery } = this.state;\n\n    if (searchQuery !== prevState.searchQuery) {\n      this.setState({\n        result: [],\n        status: Status.PENDING,\n      });\n\n      this.onFetchImages(\n        1,\n        this.onErrorNoImages(searchQuery),\n        this.onErrorNoMoreImages(searchQuery),\n      );\n    }\n  }\n\n  onLoadMoreClick = async () => {\n    const { page, searchQuery } = this.state;\n    this.setState({\n      status: Status.PENDING,\n    });\n\n    this.onFetchImages(\n      page,\n      this.onErrorNoMoreImages(searchQuery),\n      this.onErrorNoMoreImages(searchQuery),\n    );\n  };\n\n  onFetchImages = async (pageQuery, emptyResultErrorMessage, shortResultErrorMessage) => {\n    const { searchQuery } = this.state;\n\n    try {\n      const { hits } = await fetchAPI(searchQuery, pageQuery);\n\n      if (hits.length === 0) {\n        throw new Error(emptyResultErrorMessage);\n      }\n\n      if (hits.length < 12) {\n        this.setState(prevState => ({\n          result: [...prevState.result, ...hits],\n        }));\n        throw new Error(shortResultErrorMessage);\n      }\n\n      this.setState(prevState => ({\n        status: Status.RESOLVED,\n        result: [...prevState.result, ...hits],\n        page: pageQuery + 1,\n      }));\n      window.scrollBy({ top: 1000, behavior: 'smooth' });\n    } catch (error) {\n      toast.error(error.message);\n      this.setState({ status: Status.IDLE });\n    }\n  };\n\n  onErrorNoImages(query) {\n    return `No images found for \"${query}\". Try again.`;\n  }\n  onErrorNoMoreImages(query) {\n    return `No more images found for \"${query}\".`;\n  }\n\n  handleFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  toggleModal = largeImage => {\n    this.setState(prevState => ({\n      largeImage,\n      showModal: !prevState.showModal,\n    }));\n  };\n\n  render() {\n    const { result, status, showModal, largeImage } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery result={result} onClick={this.toggleModal} />\n        {status === Status.RESOLVED && <Button onClick={this.onLoadMoreClick} />}\n        {status === Status.PENDING && (\n          <Loader type=\"ThreeDots\" color=\"#995471\" width={100} style={{ textAlign: 'center' }} />\n        )}\n        {showModal && <Modal largeImage={largeImage} onClick={this.toggleModal} />}\n        <ToastContainer position=\"top-right\" autoClose={3000} />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}